apiVersion: nextdns.io/v1alpha1
kind: NextDNSCoreDNS
metadata:
  name: home-dns
  namespace: default
spec:
  profileRef:
    name: my-profile

  upstream:
    primary: DoT

  # Domain-specific DNS overrides for split-horizon DNS
  domainOverrides:
    - domain: corp.example.com
      upstreams:
        - 10.0.0.1
        - 10.0.0.2
      cacheTTL: 60
    - domain: internal.local
      upstreams:
        - 192.168.1.1

  deployment:
    mode: Deployment
    replicas: 2

  service:
    type: LoadBalancer

  cache:
    enabled: true
    successTTL: 3600

  metrics:
    enabled: true
